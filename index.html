<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TERMINAL | THE $100+ CHALLENGE</title>
    <style>
        body { background: #050505; color: #00ff41; font-family: 'Courier New', monospace; text-align: center; padding: 20px; }
        .terminal { border: 2px solid #00ff41; background: #000; display: inline-block; padding: 40px; border-radius: 5px; box-shadow: 0 0 30px #003300; max-width: 800px; width: 95%; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0; }
        .stat-box { border: 1px solid #00ff41; padding: 15px; background: #0a0a0a; }
        .big-number { font-size: 2.5rem; color: #fff; text-shadow: 0 0 10px #00ff41; }
        .cipher { background: #111; padding: 20px; border: 1px dashed #ff0000; color: #ff0000; word-break: break-all; margin: 20px 0; font-size: 1.1rem; }
        .btn { background: #00ff41; color: #000; padding: 20px 40px; text-decoration: none; font-weight: bold; font-size: 1.2rem; border: none; cursor: pointer; display: inline-block; width: 100%; box-sizing: border-box; }
        .btn:hover { background: #fff; box-shadow: 0 0 20px #fff; }
        #guessSection { display: none; margin-top: 30px; border-top: 1px solid #333; padding-top: 20px; }
        input { background: #000; border: 1px solid #00ff41; color: #00ff41; padding: 15px; width: 100%; margin-bottom: 20px; font-size: 1.1rem; box-sizing: border-box; }
        .protocol-link { color: #888; font-size: 0.7rem; margin-top: 20px; display: block; text-decoration: none; }
    </style>
</head>
<body>

<div class="terminal">
    <h1>[ SYSTEM_ENCRYPTION_CHALLENGE ]</h1>
    <p>Verification: abdelilah.karroumi@ump.ac.ma</p>

    <div class="stat-grid">
        <div class="stat-box">
            <div>CURRENT PRIZE</div>
            <div class="big-number" id="prizeDisplay">$100</div>
        </div>
        <div class="stat-box">
            <div>NEXT ENTRY FEE</div>
            <div class="big-number" id="feeDisplay">$1</div>
        </div>
    </div>

    <div class="cipher">
        MJMDB7S2DvDz7D91eqmBLQfd4rjEC5xU/2pp8RZ72Yogkg==
    </div>

    <div id="paymentSection">
        <p>CONSOLE_LOCKED: Payment Required</p>
        <a href="#" id="payLink" target="_blank" class="btn" onclick="unlockConsole()">PAY ENTRY FEE TO DECRYPT</a>
        <p style="font-size: 0.8rem;">(Console unlocks immediately after clicking)</p>
    </div>

    <div id="guessSection">
        <h3>DECRYPTION CONSOLE ONLINE</h3>
        <input type="text" id="userInput" placeholder="Enter the 2026 Secret Key...">
        <br>
        <button class="btn" onclick="checkGuess()">VERIFY KEY</button>
        <div id="result" style="margin-top:20px;"></div>
    </div>
    
    <a href="#protocol" class="protocol-link">VIEW SECURITY PROTOCOL v1.0</a>
</div>

<script>
    // --- SYSTEM LOGIC ---
    let failCount = parseInt(localStorage.getItem('globalFails')) || 0;
    const PAYPAL_EMAIL = "karroumiabdo580@gmail.com";
    const MASTER_HASH = "630d7037b51e0486f030283f50873d937ca2506e0292728956f4699252089c9e";

    function updateDisplay() {
        const prize = 100 + (failCount * 100);
        const fee = 1 + failCount;
        document.getElementById('prizeDisplay').innerText = "$" + prize;
        document.getElementById('feeDisplay').innerText = "$" + fee;
        
        // Direct PayPal Link Generation
        document.getElementById('payLink').href = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=${encodeURIComponent(PAYPAL_EMAIL)}&amount=${fee}&currency_code=USD&item_name=Challenge_Entry_Fee_${fee}`;
    }

    function unlockConsole() {
        setTimeout(() => {
            document.getElementById('paymentSection').style.display = 'none';
            document.getElementById('guessSection').style.display = 'block';
        }, 500);
    }

    async function checkGuess() {
        const input = document.getElementById('userInput').value.trim();
        const msgUint8 = new TextEncoder().encode(input);
        const hashBuffer = await crypto.subtle.digest('SHA-256', msgUint8);
        const hashArray = Array.from(new Uint8Array(hashBuffer));
        const userHash = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');

        const resultDiv = document.getElementById('result');

        if (userHash === MASTER_HASH) {
            resultDiv.innerHTML = "<h2 style='color:gold'>üèÜ SUCCESS!</h2><p>Contact abdelilah.karroumi@ump.ac.ma to claim the prize.</p>";
        } else {
            resultDiv.innerHTML = "<p style='color:red'>‚ùå ACCESS DENIED. NO MATCH FOUND.</p>";
            failCount++;
            localStorage.setItem('globalFails', failCount);
            updateDisplay();
            setTimeout(() => { location.reload(); }, 3000);
        }
    }

    updateDisplay();
</script>

</body>
</html>
